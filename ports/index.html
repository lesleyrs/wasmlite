<!DOCTYPE html><title>wasmlite</title><style>:root{color-scheme:light dark;}</style><script type='module'>var J=Object.defineProperty;var U=(e,t)=>{for(var n in t)J(e,n,{get:t[n],enumerable:!0})};var h={};U(h,{JS_getArgs:()=>R,JS_getArgsSizes:()=>M,close:()=>Q,lseek64:()=>j,open:()=>Y,read:()=>H,realpath:()=>V,unlink:()=>X,write:()=>O});function x(e,t){let n=new Uint8Array(c.buffer);t===void 0&&(t=N(e,n));let r=n.subarray(e,e+t);return m.decode(r)}function N(e,t){let n=e;for(;t[n]!==0;)n++;return n-e}function F(e){return e.length===1?e.charCodeAt(0):-1}function K(e){return _[e]!==void 0?_[e]:(console.warn("Unhandled code event:",e),-1)}var _={Unidentified:0,Escape:1,Digit1:2,Digit2:3,Digit3:4,Digit4:5,Digit5:6,Digit6:7,Digit7:8,Digit8:9,Digit9:10,Digit0:11,Minus:12,Equal:13,Backspace:14,Tab:15,KeyQ:16,KeyW:17,KeyE:18,KeyR:19,KeyT:20,KeyY:21,KeyU:22,KeyI:23,KeyO:24,KeyP:25,BracketLeft:26,BracketRight:27,Enter:28,ControlLeft:29,KeyA:30,KeyS:31,KeyD:32,KeyF:33,KeyG:34,KeyH:35,KeyJ:36,KeyK:37,KeyL:38,Semicolon:39,Quote:40,Backquote:41,ShiftLeft:42,Backslash:43,KeyZ:44,KeyX:45,KeyC:46,KeyV:47,KeyB:48,KeyN:49,KeyM:50,Comma:51,Period:52,Slash:53,ShiftRight:54,NumpadMultiply:55,AltLeft:56,Space:57,CapsLock:58,F1:59,F2:60,F3:61,F4:62,F5:63,F6:64,F7:65,F8:66,F9:67,F10:68,Pause:69,ScrollLock:70,Numpad7:71,Numpad8:72,Numpad9:73,NumpadSubtract:74,Numpad4:75,Numpad5:76,Numpad6:77,NumpadAdd:78,Numpad1:79,Numpad2:80,Numpad3:81,Numpad0:82,NumpadDecimal:83,IntlBackslash:86,F11:87,F12:88,NumpadEqual:89,F13:100,F14:101,F15:102,F16:103,F17:104,F18:105,F19:106,F20:107,F21:108,F22:109,F23:110,KanaMode:112,Lang2:113,Lang1:114,IntlRo:115,F24:118,Convert:121,NonConvert:123,IntlYen:125,NumpadComma:126,MediaTrackPrevious:57360,MediaTrackNext:57369,NumpadEnter:57372,ControlRight:57373,AudioVolumeMute:57376,LaunchApp2:57377,MediaPlayPause:57378,MediaStop:57380,BrowserHome:57394,NumpadDivide:57397,PrintScreen:57399,AltRight:57400,NumLock:57413,Home:57415,ArrowUp:57416,PageUp:57417,ArrowLeft:57419,ArrowRight:57421,End:57423,ArrowDown:57424,PageDown:57425,Insert:57426,Delete:57427,MetaLeft:57435,MetaRight:57436,ContextMenu:57437,Power:57438,BrowserSearch:57445,BrowserFavorites:57446,BrowserRefresh:57447,BrowserStop:57448,BrowserForward:57449,BrowserBack:57450,LaunchApp1:57451,LaunchMail:57452,MediaSelect:57453};function M(e,t){let n=new Uint32Array(c.buffer),r=0;for(let o of f)r+=g.encode(o).length+1;n[e>>2]=f.length,n[t>>2]=r}function R(e,t){let n=new Uint8Array(c.buffer),r=new Uint32Array(c.buffer),o=e>>2,a=t;for(let s=0;s<f.length;s++){let d=g.encode(f[s]);r[o+s]=a,n.set(d,a),n[a+d.length]=0,a+=d.length+1}}var P=0,T=1,I=2,W=1,q=2,y={fds:{},nextFd:3};function O(e,t,n){let o=new Uint8Array(c.buffer).subarray(t,t+n);if(e===W){let a=m.decode(o);return console.log(a),n}else if(e===q){let a=m.decode(o);return console.error(a),n}else console.warn("[stub] write: ",e);return-1}function H(e,t,n){let r=new Uint8Array(c.buffer),o=y.fds[e];if(!o)return-1;let a=Number(o.pos),s=o.buf.subarray(a,a+n);return o.pos+=BigInt(s.length),r.subarray(t,t+n).set(s),s.length}var Y=new WebAssembly.Suspending(async function(e,t,n){let r=x(e);try{let o=await fetch(r,{cache:"no-store"});if(console.log(o),!o.ok)return-1;let a=new Uint8Array(await o.arrayBuffer()),s=y.nextFd++;return y.fds[s]={buf:a,pos:0n},s}catch{return-1}});function j(e,t,n){let r=y.fds[e];return r?(n==P?r.pos=t:n==T?r.pos+=t:n==I&&(r.pos=BigInt(r.buf.length)-t),r.pos):-1}function Q(e){delete y.fds[e]}function V(e,t){return e}function X(e){return 0}var i,u,E,B,L={JS_logFloat:e=>console.log(e),JS_alert:e=>alert(x(e)),JS_saveFile:(e,t,n)=>{let r=new Uint8Array(c.buffer,t,n),o=new Blob([r],{type:"application/octet-stream"}),a=URL.createObjectURL(o),s=document.createElement("a");s.href=a,s.download=x(e),s.click(),URL.revokeObjectURL(a)},JS_openFilePicker:new WebAssembly.Suspending(async(e,t)=>{let{data:n,name:r}=await new Promise((k,v)=>{i.onclick=()=>{let w=document.createElement("input");w.type="file",w.onchange=C=>{let A=C.target.files[0],p=new FileReader;p.onload=()=>k({data:p.result,name:A.name}),p.onerror=()=>v(p.error),p.readAsArrayBuffer(A),i.onclick=null},w.click()}}),o,a;t&&(o=g.encode(r),a=l.malloc(o.length+1));let s=l.malloc(n.byteLength),d=new Uint8Array(c.buffer),b=new Uint32Array(c.buffer);return d.set(new Uint8Array(n),s),b[e>>2]=n.byteLength,t&&(d.set(o,a),d[a+o.length]=0,b[t>>2]=a),s}),JS_setTimeout:new WebAssembly.Suspending(async e=>await new Promise(t=>setTimeout(t,e))),JS_requestAnimationFrame:new WebAssembly.Suspending(async()=>await new Promise(e=>requestAnimationFrame(e))),JS_DateNow:()=>BigInt(Math.floor(Date.now())),JS_performanceNow:()=>BigInt(Math.floor(performance.now())),JS_setPixels:e=>{let t=new Uint32Array(c.buffer,e,i.width*i.height);for(let r=0;r<t.length;r++)t[r]|=4278190080;let n=new Uint8ClampedArray(t.buffer,t.byteOffset,t.byteLength);E.data.set(n),u.putImageData(E,0,0)},JS_setPixelsAlpha:e=>{let t=new Uint8Array(c.buffer,e,i.width*i.height*4);E.data.set(t),u.putImageData(E,0,0)},JS_setTitle:e=>{document.title=x(e)},JS_createCanvas:(e,t)=>{i=document.createElement("canvas"),i.style.display="block",i.style.margin="auto",i.width=e,i.height=t,document.body.appendChild(i),u=i.getContext("2d",{alpha:!1}),E=u.createImageData(i.width,i.height),window.addEventListener("contextmenu",n=>n.preventDefault())},JS_setFont:e=>u.font=x(e),JS_measureTextWidth:e=>u.measureText(x(e)).width,JS_fillStyle:e=>u.fillStyle=x(e),JS_fillText:(e,t,n)=>u.fillText(x(e),t,n),JS_fillRect:(e,t,n,r)=>u.fillRect(e,t,n,r),JS_strokeStyle:e=>u.strokeStyle=x(e),JS_strokeRect:(e,t,n,r)=>u.strokeRect(e,t,n,r),JS_addBlurEventListener:e=>{window.addEventListener("blur",()=>l.__indirect_function_table.get(e)())},JS_requestPointerLock:()=>{B=!0,i.addEventListener("click",()=>i.requestPointerLock())},JS_addMouseMoveEventListener:(e,t)=>{S("mousemove",e,t)},JS_addMouseDownEventListener:(e,t)=>{S("mousedown",e,t)},JS_addMouseUpEventListener:(e,t)=>{S("mouseup",e,t)},JS_addKeyDownEventListener:(e,t)=>{D("keydown",e,t)},JS_addKeyUpEventListener:(e,t)=>{D("keyup",e,t)}};function S(e,t,n){window.addEventListener(e,r=>{let o=i.getBoundingClientRect(),a;B?a=l.__indirect_function_table.get(n)(t,r.button,r.movementX,r.movementY):a=l.__indirect_function_table.get(n)(t,r.button,r.x-o.left,r.y-o.top),a&&r.preventDefault()})}function D(e,t,n){window.addEventListener(e,r=>{l.__indirect_function_table.get(n)(t,F(r.key),K(r.code),r.ctrlKey<<0|r.shiftKey<<1|r.altKey<<2|r.metaKey<<3)&&r.preventDefault()})}var z=new URLSearchParams(location.search),f=[];for(let e of z.keys())f.push(e);console.log(f);var{instance:G}=await WebAssembly.instantiateStreaming(fetch(`${f[0]}.wasm`),{env:{...h,...L}}),l=G.exports;console.log(l);var c=l.memory,m=new TextDecoder,g=new TextEncoder;await WebAssembly.promising(l._start)();export{f as args,m as decoder,g as encoder,l as exports,c as memory};</script>